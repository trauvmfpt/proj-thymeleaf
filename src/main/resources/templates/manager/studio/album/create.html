<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<form th:object="${album}" enctype="multipart/form-data" action="/album/create" method="post">
    <div class="form-group">
        <label>Name</label>
        <input type="text" th:field="${album.name}" class="form-control">
    </div>
    <div class="form-group">
        <label>Description</label>
        <input type="text" th:field="${album.description}" class="form-control">
    </div>
    <div class="form-group">
        <label>Studio</label>
        <select th:field="${album.studioInfo}" class="form form-control">
            <option value="" selected>Choose Studio</option>
            <option th:each="studio : ${studios}" th:value="${studio.id}" th:text="${studio.fullName}"></option>
        </select>
    </div>
    <div class="form-group">
        <label>Photographer</label>
        <select th:field="${album.photographerInfo}" class="form form-control">
            <option value="" selected>Choose Photographer</option>
            <option th:each="photographer : ${photographers}" th:value="${photographer.id}" th:text="${photographer.fullName}"></option>
        </select>
    </div>
    <div class="form-group">
        <label>Images</label>
        <div class="uploaded_images"></div>
        <div id="input_images">

        </div>
    </div>
    <button type="button" id="upload_widget" class="cloudinary-button">Upload files</button>

    <div class="d-flex justify-content-center">
        <button type="submit" class="form_submit_button button trans_200"
                style="display: block;">create album<span></span><span></span><span></span></button>
    </div>

</form>

<script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>
<script type="text/javascript">
    var myWidget = cloudinary.createUploadWidget({
        cloudName: 'phucvu',
        sources: [ 'local', 'url', 'instagram', 'facebook'],
        thumbnails: ".uploaded_images",
        uploadPreset: 'photoPlatForm'}, (error, result) => {
        if (!error && result && result.event === "success") {
        var x = document.createElement("INPUT");
        x.setAttribute("type", "hidden");
        x.setAttribute("name", "imgUrls");
        x.setAttribute("value", result.info.secure_url);
        document.getElementById("input_images").appendChild(x);
    }
    }
    )

    document.getElementById("upload_widget").addEventListener("click", function(){
        myWidget.open();
    }, false);
</script>
</body>
</html>